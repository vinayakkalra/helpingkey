<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-150643411-2"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-150643411-2');
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-PFRW8HP');</script>
        <!-- End Google Tag Manager -->

    <title>User Login |  helpingKey | Gift your Loved Ones</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="images/cropped-Fin-270x270.jpg">
    <script src="https://use.fontawesome.com/ebc80d226d.js"></script>
    <!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css"> -->
    <style type="text/css">
        .card {
            position: relative;
            display: -ms-flexbox;
            display: flex;
            -ms-flex-direction: column;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-clip: border-box;
            border-radius: .25rem;
            background-color:#fff;
            border: 0px #fff;
        }
        .divider-text {
            position: relative;
            text-align: center;
            margin-top: 15px;
            margin-bottom: 15px;
        }
        .divider-text span {
            padding: 7px;
            font-size: 12px;
            position: relative;   
            z-index: 2;
        }
        .divider-text:after {
            content: "";
            position: absolute;
            width: 100%;
            border-bottom: 1px solid #ddd;
            top: 55%;
            left: 0;
            z-index: 1;
        }
        .btn-facebook {
            background-color: #405D9D;
            color: #fff;
        }
        .btn-twitter {
            background-color: #42AEEC;
            color: #fff;
        }
        .input-group-text{
            background-color: #f8f9fa;
            border: 1px solid #f8f9fa;
            color:#000;
        }
        .form-control {
            display: block;
            width: 100%;
            height: calc(2.5em + 0.75rem + 2px);
            padding: .375rem .75rem;
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.5;
            color: #000!important;
            background-color: #f8f9fa !important;
            background-clip: padding-box;
            border: 1px solid #f8f9fa!important;
            border-radius: 0px;
            transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
        }
    </style>

    <!-- Facebook Pixel Code -->
    <script>
        !function(f,b,e,v,n,t,s)
        {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
        n.callMethod.apply(n,arguments):n.queue.push(arguments)};
        if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
        n.queue=[];t=b.createElement(e);t.async=!0;
        t.src=v;s=b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t,s)}(window, document,'script',
        'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '2925272084236286');
        fbq('track', 'PageView');
      </script>
      <noscript><img height="1" width="1" style="display:none"
        src="https://www.facebook.com/tr?id=2925272084236286&ev=PageView&noscript=1"
      /></noscript>
      <!-- End Facebook Pixel Code -->
    
</head>

<body>

    <!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PFRW8HP"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    
    <div class="d-none d-lg-block">
        <!-- Navigation -->
        <div class="fixed-top" style="padding:20px 0px;background-color:#00abc9;outline:none;">
            <nav class="navbar navbar-expand-lg navbar-dark static-top">
                <div class="container">
                    <a class="navbar-brand" href="/">
                        <img src="images/logo.png" alt="" width="133" height="50">
                    </a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive"
                        aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarResponsive">
                        <ul class="navbar-nav ml-auto font-roboto-b" style="font-size: 18px;font-weight:bold;">
                            <li class="nav-item active">
                                <a class="nav-link" href="/">Home
                                    <span class="sr-only">(current)</span>
                                </a>
                            </li>
                            <!-- <li class="nav-item active">
                                <a class="nav-link" href="/">Home
                                    <span class="sr-only">(current)</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link cursor-pointer text-white" href="signup">Signup</a>
                            </li>
                            <li class="nav-item active">
                                <a class="nav-link" href="user-login">Login</a>
                            </li> -->
                        </ul>
                    </div>
                </div>
            </nav>
        </div>

        <!-- Page Content -->
        <div class="container mb-5" style="margin-top: 150px;" id="password-change-container">
        
            <div class="card bg-light">
                <article class="card-body mx-auto">
                    <h4 class="card-title mt-3 text-center">Forgot Password?</h4>
                    <p class="text-center mb-3">Enter the below details to reset your password</p>
                    <!-- <p>
                        <a href="" class="btn btn-block btn-twitter"> <i class="fab fa-twitter"></i>   Login via Twitter</a>
                        <a href="" class="btn btn-block btn-facebook"> <i class="fab fa-facebook-f"></i>   Login via
                            facebook</a>
                    </p>
                    <p class="divider-text">
                        <span class="bg-light">OR</span>
                    </p> -->
                    <form>
                        <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-envelope"></i> </span>
                            </div>
                            <input name="email" id="email" class="form-control" placeholder="Email address" type="email">
                        </div> <!-- form-group// -->
                        <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-phone"></i> </span>
                            </div>
                            <select class="custom-select" style="max-width: 80px;">
                                <option selected="">+91</option>
                            </select>
                            <input name="phone" id="phone" class="form-control" placeholder="Phone number" type="number">
                        </div> <!-- form-group// -->
                        <!-- <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-building"></i> </span>
                            </div>
                            <select class="form-control">
                                <option selected=""> Select job type</option>
                                <option>Designer</option>
                                <option>Manager</option>
                                <option>Accaunting</option>
                            </select>
                        </div> form-group end.// -->
                        <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                            </div>
                            <input class="form-control" id="password" placeholder="Create password" type="password">
                        </div> <!-- form-group// -->
                        <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-lock"></i> </span>
                            </div>
                            <input class="form-control" id="confirm_password" placeholder="Confirm password" type="password">
                        </div> <!-- form-group// -->
                        <div class="form-group">
                            <button type="submit" id="signup" class="btn btn-primary btn-block"> Change Password </button>
                        </div> <!-- form-group// -->
                        <p class="text-center">Go back to <a href="user-login">Log In</a> page</p>
                    </form>
                </article>
            </div> <!-- card.// -->
        
        </div>
        <!--container end.//-->
        <div class="container mb-5" style="margin-top: 150px; display: none;" id="password-change-success">
        
            <div class="card bg-light">
                <article class="card-body mx-auto">
                    <h4 class="card-title mt-3 text-center">Password Changed Successfully</h4>
                    <p class="text-center">Go back to <a href="user-login">Log In</a> page</p>
                </article>
            </div>
        </div>
    </div>
    <div class="d-lg-none">
        <!-- Navigation -->
        <div class="fixed-top" style="padding:80px 0px;background-color:#00abc9;outline:none;">
            <header>
                <div class="position-fixed h-100 w-100" style="opacity:1;backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);z-index:16;display:none;top:0px" id="drawer">
                    <div class="container h-100 w-100 pr-0">
                        <div class="row h-100 w-100 mr-0 position-absolute">
                            <div class="col-2 d-flex justify-content-end pt-5 pl-0" id="cross" style="padding-right:20px !important;">
                                <div id="mobile-cross">
                                    <p class="m-0" style="font-size:50px;color:#fff;">X</p>
                                </div>
                            </div>
                            <div class="col-10 position-relative" style="background: #00abc9 0% 0% no-repeat padding-box;">
                                <div class="position-absolute w-100" style="top:10%;">
                                    <p class="footer-text font-weight-light text-center" style="font-size:50px;margin-bottom:10px; font-family: europhonic;color:#231c62;" onclick="window.location = '/'">Home</p>
                                    <!-- <p class="footer-text font-weight-light text-center" style="font-size:50px;margin-bottom:10px; font-family: europhonic;color:#fff;" onclick="window.location = '/'">Home</p>
                                    <p class="footer-text font-weight-light text-center" style="font-size:50px;margin-bottom:10px; font-family: europhonic;color:#fff;" onclick="window.location = 'signup'">Signup</p>
                                    <p class="footer-text font-weight-light text-center" style="font-size:50px;margin-bottom:10px; font-family: europhonic;color:#fff;" onclick="window.location = 'login'">Login</p> -->
                                </div>                          
                            </div>                        
                        </div>                
                    </div>                
                </div>        
                <div class="nav-container">
                    <div id="mobile-navbar"></div>
                    <div style="position: fixed; z-index: 10; right:70px; margin-top:-38px; z-index:15 !important;" id="open-drawer">
                        <hr style="width: 50px;height: 4px;background-color: white;margin-top: 10px;margin-bottom: 0px;border-radius: 100px;">
                        <hr style="width: 50px;height: 4px;background-color: white;margin-top: 15px;margin-bottom: 0px;border-radius: 100px;">
                        <hr style="width: 50px;height: 4px;background-color: white;margin-top: 15px;margin-bottom: 0px;border-radius: 100px;">
                    </div>
                    <div class="d-flex position-fixed align-items-center w-100" style="z-index: 10; margin-top:-45px; margin-left:32px;">
                        <a class="navbar-brand header-text" id="mobile-header-logo-text" href="/">
                            <img class="logo-header" src="images/logo.png" alt="" style="width:250px;">
                        </a>
                    </div>
                </div>            
            </header>
        </div>

        <!-- Page Content -->
        <div class="container mb-5" style="margin-top: 250px;" id="password-change-container-mobile">
        
            <div class="card bg-light">
                <article class="card-body mx-2">
                    <h4 class="card-title mt-3 text-center" style="font-size:3rem;">Forgot Password?</h4>
                    <p class="text-center mb-3" style="font-size:2rem;">Enter the below details to reset your password</p>
                    <!-- <p>
                        <a href="" class="btn btn-block btn-twitter"> <i class="fab fa-twitter"></i>   Login via Twitter</a>
                        <a href="" class="btn btn-block btn-facebook"> <i class="fab fa-facebook-f"></i>   Login via
                            facebook</a>
                    </p>
                    <p class="divider-text">
                        <span class="bg-light">OR</span>
                    </p> -->
                    <form>
                       
                        <div class="form-group input-group pb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="padding-left: 25px; padding-right: 25px;"> <i class="fa fa-envelope" style="font-size:2rem;"></i> </span>
                            </div>
                            <input name="email" id="email-mobile" class="form-control" placeholder="Email address" type="email" style="font-size:2rem;">
                        </div> <!-- form-group// -->
                        <div class="form-group input-group pb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="padding-left: 25px; padding-right: 25px;"> <i class="fa fa-phone" style="font-size:2rem;"></i> </span>
                            </div>
                            <select class="custom-select" style="max-width: 120px; font-size:2rem;">
                                <option selected="" >+91</option>
                            </select>
                            <input name="phone" id="phone-mobile" class="form-control" placeholder="Phone number" type="number" style="font-size:2rem;">
                        </div> <!-- form-group// -->
                        <!-- <div class="form-group input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"> <i class="fa fa-building"></i> </span>
                            </div>
                            <select class="form-control">
                                <option selected=""> Select job type</option>
                                <option>Designer</option>
                                <option>Manager</option>
                                <option>Accaunting</option>
                            </select>
                        </div> form-group end.// -->
                        <div class="form-group input-group pb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="padding-left: 25px; padding-right: 25px;"> <i class="fa fa-lock" style="font-size:2rem;"></i> </span>
                            </div>
                            <input class="form-control" id="password-mobile" placeholder="Create password" type="password" style="font-size:2rem;">
                        </div> <!-- form-group// -->
                        <div class="form-group input-group pb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" style="padding-left: 25px; padding-right: 25px;"> <i class="fa fa-lock" style="font-size:2rem;"></i> </span>
                            </div>
                            <input class="form-control" id="confirm_password-mobile" placeholder="Confirm password" type="password" style="font-size:2rem;">
                        </div> <!-- form-group// -->
                        <div class="form-group">
                            <button type="submit" id="signup-mobile" class="btn btn-primary btn-block" style="font-size :2.5rem;"> Change Password </button>
                        </div> <!-- form-group// -->
                        <p class="text-center" style="font-size:2rem;">Go back to <a href="user-login">Log In</a> page</p>
                    </form>
                </article>
            </div> <!-- card.// -->
        
        </div>
        <!--container end.//-->
        <div class="container mb-5" style="margin-top: 250px; display: none;" id="password-change-success-mobile">
        
            <div class="card bg-light">
                <article class="card-body mx-2">
                    <h4 class="card-title mt-3 text-center" style="font-size: 3rem;">Password Changed Successfully</h4>
                    <p class="text-center mb-3" style="font-size:2rem;">Go back to <a href="user-login">Log In</a> page</p>
                </article>
            </div>
        </div>
        
    </div>
    
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
        //open mobile drawer
        $("#drawer").css('display','none');
            $("#open-drawer").on("click",function(){
            if($("#drawer").css('display') == 'none'){
                $("#drawer").css('display','block');
            } else{
                $("#drawer").css('display','none');
            }
        });
        $("#cross").on("click",function(){
            $("#drawer").css('display','none');
        });

        function validateEmail() {
            var email = $("#email").val();
            var emailReg = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
            if (emailReg.test(email)) {
                return true;
            } else {
                return false;
            }
        }

        $("#signup").on("click", function(e){
            e.preventDefault();
            var error = "";

            if($("#phone").val() == ""){
                $("#phone").css('border-color','red');
                $("#phone").css('border-width','1px');
                error = error + 'Phone';
            }else{
                $("#phone").css('border-color','#BCE0FD');
                $("#phone").css('border-width','1px');
            }
            if(validateEmail()) {
                $("#email").css('border-color','#BCE0FD');
                $("#email").css('border-width','1px');
                
            }else{
                $("#email").css('border-color','red');
                $("#email").css('border-width','1px');
                error = error + 'email';
            }

            if($("#confirm_password").val() == ""){
                $("#confirm_password").css('border-color','red');
                $("#confirm_password").css('border-width','1px');
                error = error + 'confirm password';
            }else{
                if($("#confirm_password").val() != $("#password").val()){
                    $("#confirm_password").css('border-color','red');
                    $("#confirm_password").css('border-width','1px');
                    error = error + 'confirm password failure';
                    alert("Password and Confirm password fields do not match");
                }else{
                    $("#confirm_password").css('border-color','#BCE0FD');
                    $("#confirm_password").css('border-width','1px');
                }
            }

            if($("#password").val() == ""){
                $("#password").css('border-color','red');
                $("#password").css('border-width','1px');
                error = error + 'confirm password';
            }else{
                $("#password").css('border-color','#BCE0FD');
                $("#password").css('border-width','1px');
            }

            if(error == ""){
                $.ajax({
                    type:'POST',
                    url:'php/user-forgot-password.php',
                    dataType: "json",
                    data:{
                        
                        email : $("#email").val(),
                        phone : $("#phone").val(),
                        password: $("#password").val()
                        
                    },
                    success:function(data){
                        if(data.status == 201){
                            // sessionStorage.username = $("#email").val();
                            // window.location = "login";
                            $("#password-change-container").css('display','none');
                            $("#password-change-success").css('display','block');

                        } else if(data.status == 301){
                            //Invalid email and phone combo
                            alert(data.error);
                        } else if(data.status == 601){
                            console.log(data.error);
                            // alert("problem with query");
                        }else{
                            
                        } 
                    }
                });
            }
        });

        // mobile code for submission
        function validateEmailMobile() {
            var email = $("#email-mobile").val();
            var emailReg = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
            if (emailReg.test(email)) {
                return true;
            } else {
                return false;
            }
        }
        $("#signup-mobile").on("click", function(e){
            e.preventDefault();
            var error = "";

            
            if($("#phone-mobile").val() == ""){
                $("#phone-mobile").css('border-color','red');
                $("#phone-mobile").css('border-width','1px');
                error = error + 'Phone';
            }else{
                $("#phone-mobile").css('border-color','#BCE0FD');
                $("#phone-mobile").css('border-width','1px');
            }
            if(validateEmailMobile()) {
                $("#email-mobile").css('border-color','#BCE0FD');
                $("#email-mobile").css('border-width','1px');
                
            }else{
                $("#email-mobile").css('border-color','red');
                $("#email-mobile").css('border-width','1px');
                error = error + 'email';
            }

            if($("#confirm_password-mobile").val() == ""){
                $("#confirm_password-mobile").css('border-color','red');
                $("#confirm_password-mobile").css('border-width','1px');
                error = error + 'confirm password';
            }else{
                if($("#confirm_password-mobile").val() != $("#password-mobile").val()){
                    $("#confirm_password-mobile").css('border-color','red');
                    $("#confirm_password-mobile").css('border-width','1px');
                    error = error + 'confirm password failure';
                    alert("Password and Confirm password fields do not match");
                }else{
                    $("#confirm_password-mobile").css('border-color','#BCE0FD');
                    $("#confirm_password-mobile").css('border-width','1px');
                }
            }

            if($("#password-mobile").val() == ""){
                $("#password-mobile").css('border-color','red');
                $("#password-mobile").css('border-width','1px');
                error = error + 'confirm password';
            }else{
                $("#password-mobile").css('border-color','#BCE0FD');
                $("#password-mobile").css('border-width','1px');
            }

            if(error == ""){
                $.ajax({
                    type:'POST',
                    url:'php/user-forgot-password.php',
                    dataType: "json",
                    data:{
                        email : $("#email-mobile").val(),
                        phone : $("#phone-mobile").val(),
                        password: $("#password-mobile").val()
                        
                    },
                    success:function(data){
                        if(data.status == 201){
                            // sessionStorage.username = $("#email").val();
                            // window.location = "login";
                            $("#password-change-container-mobile").css('display','none');
                            $("#password-change-success-mobile").css('display','block');

                        } else if(data.status == 301){
                            //Invalid email and phone combo
                            alert(data.error);
                        } else if(data.status == 601){
                            console.log(data.error);
                            // alert("problem with query");
                        }else{
                            
                        } 
                    }
                });
            }
        });
    </script>
</body>
</html>